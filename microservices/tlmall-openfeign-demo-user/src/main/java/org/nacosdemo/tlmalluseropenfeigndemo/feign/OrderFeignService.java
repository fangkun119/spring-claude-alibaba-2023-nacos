package org.nacosdemo.tlmalluseropenfeigndemo.feign;

import feign.Param;
import feign.RequestLine;
import org.nacosdemo.tlmalluseropenfeigndemo.config.FeignConfig;
import org.nacosdemo.tlmalluseropenfeigndemo.feign.dto.OrderDTO;
import org.springframework.cloud.openfeign.FeignClient;
import org.springcloudmvp.tlmallcommon.Result;
import org.springframework.web.bind.annotation.*;

/**
 * 用Spring MVC注解创建Feign Client
 */
@FeignClient(
        value = "tlmall-order",
        path = "/order",
        // FeignConfig局部配置，让指定的微服务生效，在@FeignClient 注解中指定configuration
        configuration = FeignConfig.class)
public interface OrderFeignService {
    @GetMapping("/getOrder")
    Result<?> getOrder(@RequestParam("userId") String userId);

    @GetMapping(value = "/post1")
    Result<?> post1(@RequestBody OrderDTO orderDTO);

    @PostMapping("/post2")
    Result<?> post2(@RequestBody OrderDTO orderDTO,@RequestParam("token") String token);

    @PostMapping(value = "/post3/{userId}")
    Result<?> post3(@RequestBody OrderDTO orderDTO, @PathVariable("userId") String userId);
}

/**
 * 用Feign原生注解创建Feign Client
 */
//@FeignClient(value = "tlmall-order", path = "/order")
//public interface OrderFeignService {
//    @RequestLine("GET /getOrder?userId={userId}")
//    Result<?> getOrder(@Param("userId") String userId);
//}
